<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja Favelados</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        :root {
            --azul: #0029A4;
            --azul-claro: #2a4bb8;
            --branco: #ffffff;
            --cinza: #f5f5f5;
            --cinza-escuro: #666;
            --verde: #27ae60;
            --vermelho: #e74c3c;
        }

        body {
            background: var(--branco);
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: var(--branco);
            border-bottom: 3px solid var(--azul);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--azul);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: #333;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        nav a:hover {
            background: var(--azul);
            color: var(--branco);
        }

        .cart-count {
            background: var(--azul);
            color: var(--branco);
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            margin-left: 5px;
        }

        /* Main Content */
        .main-content {
            padding: 30px 0;
            min-height: 70vh;
        }

        /* Abas */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Filtros */
        .filters {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #ddd;
            background: var(--branco);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background: var(--azul);
            color: var(--branco);
            border-color: var(--azul);
        }

        /* Grid de Produtos */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background: var(--branco);
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product-image {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--azul);
        }

        .product-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .product-price {
            color: var(--azul);
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .product-category {
            color: var(--cinza-escuro);
            font-size: 12px;
            margin-bottom: 10px;
        }

        .stock-badge {
            display: inline-block;
            padding: 4px 8px;
            background: var(--verde);
            color: var(--branco);
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .stock-badge.esgotado {
            background: var(--vermelho);
        }

        .btn {
            background: var(--azul);
            color: var(--branco);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: var(--azul-claro);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Carrinho */
        .cart-item {
            background: var(--branco);
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-total {
            font-size: 20px;
            font-weight: bold;
            text-align: right;
            margin: 20px 0;
            color: var(--azul);
        }

        .whatsapp-btn {
            background: #25D366;
        }

        .whatsapp-btn:hover {
            background: #128C7E;
        }

        /* Admin */
        .admin-panel {
            background: var(--azul);
            color: var(--branco);
            padding: 10px 0;
            margin-bottom: 20px;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .admin-product-card {
            background: var(--branco);
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
        }

        .product-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .status-ativo {
            background: var(--verde);
            color: var(--branco);
        }

        .status-inativo {
            background: var(--vermelho);
            color: var(--branco);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--branco);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--azul);
            color: var(--azul);
        }

        .btn-outline:hover {
            background: var(--azul);
            color: var(--branco);
        }

        /* Estados vazios */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--cinza-escuro);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        footer {
            background: var(--azul);
            color: var(--branco);
            text-align: center;
            padding: 20px 0;
            margin-top: 50px;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .cart-item {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">üè™ Loja Favelados</div>
            <nav>
                <ul>
                    <li><a href="#" onclick="showTab('catalogo')">Cat√°logo</a></li>
                    <li>
                        <a href="#" onclick="showTab('carrinho')">
                            üõí Carrinho <span class="cart-count" id="cartCount">0</span>
                        </a>
                    </li>
                    <li><a href="#" onclick="showTab('admin-login')">Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Painel Admin -->
    <div class="admin-panel" id="adminPanel" style="display: none;">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>Painel Administrativo</div>
                <div class="admin-actions">
                    <button class="btn btn-outline" onclick="showTab('admin-painel')" style="background: transparent; color: white; border-color: white;">
                        Gerenciar Produtos
                    </button>
                    <button class="btn btn-outline" onclick="logoutAdmin()" style="background: transparent; color: white; border-color: white;">
                        Sair
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="container main-content">
        <!-- Cat√°logo -->
        <div id="catalogo" class="tab-content active">
            <h1 style="color: var(--azul); margin-bottom: 10px;">Cat√°logo de Produtos</h1>
            
            <div class="filters">
                <button class="filter-btn active" onclick="filtrarProdutos('')">Todos</button>
                <button class="filter-btn" onclick="filtrarProdutos('Bon√©s')">Bon√©s</button>
                <button class="filter-btn" onclick="filtrarProdutos('Camisas')">Camisas</button>
                <button class="filter-btn" onclick="filtrarProdutos('Regatas')">Regatas</button>
                <button class="filter-btn" onclick="filtrarProdutos('Moletons')">Moletons</button>
                <button class="filter-btn" onclick="filtrarProdutos('Cal√ßas')">Cal√ßas</button>
                <button class="filter-btn" onclick="filtrarProdutos('Acess√≥rios')">Acess√≥rios</button>
            </div>

            <div class="product-grid" id="productsGrid">
                <!-- Produtos ser√£o carregados aqui -->
            </div>
        </div>

        <!-- Carrinho -->
        <div id="carrinho" class="tab-content">
            <h1 style="color: var(--azul); margin-bottom: 20px;">Meu Carrinho</h1>
            <div id="cartItems"></div>
            <div class="cart-total" id="cartTotal">Total: R$ 0,00</div>
            <button class="btn whatsapp-btn btn-block" id="checkoutBtn" style="display: none;" onclick="finalizarPedido()">
                üì± Finalizar Pedido via WhatsApp
            </button>
        </div>

        <!-- Login Admin -->
        <div id="admin-login" class="tab-content">
            <div style="max-width: 400px; margin: 50px auto; background: var(--branco); padding: 30px; border-radius: 10px; border: 1px solid #ddd;">
                <h2 style="text-align: center; color: var(--azul); margin-bottom: 20px;">üîê Login Admin</h2>
                
                <div class="form-group">
                    <label>Usu√°rio:</label>
                    <input type="text" id="adminUsername" placeholder="Digite o usu√°rio">
                </div>
                
                <div class="form-group">
                    <label>Senha:</label>
                    <input type="password" id="adminPassword" placeholder="Digite a senha">
                </div>
                
                <button class="btn btn-block" onclick="loginAdmin()">Entrar</button>
                
                <div id="loginMessage" style="margin-top: 15px; text-align: center;"></div>
            </div>
        </div>

        <!-- Painel Admin -->
        <div id="admin-painel" class="tab-content">
            <h1 style="color: var(--azul); margin-bottom: 20px;">Painel Administrativo</h1>
            
            <button class="btn" onclick="abrirModalProduto()">
                ‚ûï Novo Produto
            </button>

            <div class="admin-grid" id="adminProductsGrid">
                <!-- Produtos do admin -->
            </div>
        </div>
    </div>

    <!-- Modal Produto -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <h2 id="modalTitle">Novo Produto</h2>
            
            <form id="productForm">
                <div class="form-group">
                    <label>Nome do Produto:</label>
                    <input type="text" id="productName" required>
                </div>
                
                <div class="form-group">
                    <label>Categoria:</label>
                    <select id="productCategory" required>
                        <option value="">Selecione...</option>
                        <option value="Bon√©s">Bon√©s</option>
                        <option value="Camisas">Camisas</option>
                        <option value="Regatas">Regatas</option>
                        <option value="Moletons">Moletons</option>
                        <option value="Cal√ßas">Cal√ßas</option>
                        <option value="Acess√≥rios">Acess√≥rios</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Pre√ßo (R$):</label>
                    <input type="number" id="productPrice" step="0.01" min="0" required>
                </div>
                
                <div class="form-group">
                    <label>Cor:</label>
                    <input type="text" id="productColor" required>
                </div>
                
                <div class="form-group">
                    <label>Tamanhos e Estoque (P:10, M:15, G:8):</label>
                    <input type="text" id="productSizes" placeholder="P:10, M:15, G:8" required>
                </div>
                
                <div class="form-group">
                    <label>Descri√ß√£o:</label>
                    <textarea id="productDescription" rows="3" required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Imagem (emoji ou URL):</label>
                    <input type="text" id="productImage" required>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="fecharModalProduto()">Cancelar</button>
                    <button type="submit" class="btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Detalhes -->
    <div class="modal" id="productDetailModal">
        <div class="modal-content">
            <h2 id="detailProductName">Produto</h2>
            <div id="productDetailContent">
                <!-- Conte√∫do dos detalhes -->
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>¬© 2024 Loja Favelados - Desde 1992</p>
        </div>
    </footer>

    <script>
        // Dados iniciais
        let produtos = JSON.parse(localStorage.getItem('lojaProdutos')) || [
            {
                id: 1,
                nome: "Bon√© Favelados",
                categoria: "Bon√©s",
                preco: 49.90,
                cor: "Preto",
                tamanhos: {"P": 5, "M": 8, "G": 3},
                descricao: "Bon√© estilo baseball",
                imagem: "üß¢",
                ativo: true
            },
            {
                id: 2,
                nome: "Camiseta B√°sica",
                categoria: "Camisas",
                preco: 39.90,
                cor: "Branco",
                tamanhos: {"P": 3, "M": 6, "G": 4, "GG": 2},
                descricao: "Camiseta 100% algod√£o",
                imagem: "üëï",
                ativo: true
            }
        ];

        let carrinho = JSON.parse(localStorage.getItem('lojaCarrinho')) || [];
        let adminLogado = localStorage.getItem('adminLogado') === 'true';
        let produtoEditando = null;
        let filtroAtual = '';

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            salvarDados();
            carregarProdutos();
            atualizarCarrinho();
            
            if (adminLogado) {
                document.getElementById('adminPanel').style.display = 'block';
            }

            document.getElementById('productForm').addEventListener('submit', function(e) {
                e.preventDefault();
                salvarProduto();
            });
        });

        // Fun√ß√µes de Navega√ß√£o
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
        }

        function filtrarProdutos(categoria) {
            filtroAtual = categoria;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            carregarProdutos();
        }

        // Produtos
        function carregarProdutos() {
            const grid = document.getElementById('productsGrid');
            let produtosExibir = produtos.filter(p => p.ativo);
            
            if (filtroAtual) {
                produtosExibir = produtosExibir.filter(p => p.categoria === filtroAtual);
            }

            if (produtosExibir.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <div>üòî</div>
                        <h3>Ops! Nenhum produto encontrado</h3>
                        <p>Tente outro filtro</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = produtosExibir.map(produto => {
                const temEstoque = Object.values(produto.tamanhos).some(qtd => qtd > 0);
                return `
                    <div class="product-card">
                        <div class="product-image">${produto.imagem}</div>
                        <h3 class="product-title">${produto.nome}</h3>
                        <div class="product-category">${produto.categoria}</div>
                        <div class="product-price">R$ ${produto.preco.toFixed(2)}</div>
                        <div class="stock-badge ${temEstoque ? '' : 'esgotado'}">
                            ${temEstoque ? 'Em Estoque' : 'Esgotado'}
                        </div>
                        <button class="btn btn-block" onclick="verDetalhes(${produto.id})">
                            Ver Detalhes
                        </button>
                    </div>
                `;
            }).join('');
        }

        function verDetalhes(produtoId) {
            const produto = produtos.find(p => p.id === produtoId);
            if (!produto) return;

            document.getElementById('detailProductName').textContent = produto.nome;
            
            const tamanhosDisponiveis = Object.entries(produto.tamanhos)
                .filter(([_, qtd]) => qtd > 0)
                .map(([tamanho]) => tamanho);

            document.getElementById('productDetailContent').innerHTML = `
                <div class="product-image" style="font-size: 64px; text-align: center; margin: 20px 0;">${produto.imagem}</div>
                <div style="margin-bottom: 15px;"><strong>Pre√ßo:</strong> R$ ${produto.preco.toFixed(2)}</div>
                <div style="margin-bottom: 15px;"><strong>Cor:</strong> ${produto.cor}</div>
                <div style="margin-bottom: 20px;">${produto.descricao}</div>
                
                ${tamanhosDisponiveis.length > 0 ? `
                    <div class="form-group">
                        <label>Tamanho:</label>
                        <select id="selectedSize" class="form-control">
                            ${tamanhosDisponiveis.map(t => `<option value="${t}">${t}</option>`).join('')}
                        </select>
                    </div>
                    <button class="btn btn-block" onclick="adicionarAoCarrinho(${produto.id})">
                        Fazer meu pedido
                    </button>
                ` : `
                    <div style="background: #ffeaea; color: #721c24; padding: 10px; border-radius: 5px; text-align: center;">
                        Produto esgotado
                    </div>
                `}
            `;

            document.getElementById('productDetailModal').style.display = 'flex';
        }

        function fecharModalDetalhes() {
            document.getElementById('productDetailModal').style.display = 'none';
        }

        // Carrinho
        function adicionarAoCarrinho(produtoId) {
            const produto = produtos.find(p => p.id === produtoId);
            const tamanho = document.getElementById('selectedSize').value;

            if (!produto || produto.tamanhos[tamanho] <= 0) {
                alert('Tamanho esgotado!');
                return;
            }

            carrinho.push({
                id: Date.now(),
                produtoId: produto.id,
                nome: produto.nome,
                cor: produto.cor,
                tamanho: tamanho,
                preco: produto.preco
            });

            produto.tamanhos[tamanho]--;

            salvarDados();
            atualizarCarrinho();
            fecharModalDetalhes();
            carregarProdutos();

            alert('‚úÖ Produto adicionado ao carrinho!');
        }

        function atualizarCarrinho() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            const cartCount = document.getElementById('cartCount');

            cartCount.textContent = carrinho.length;

            if (carrinho.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-state">
                        <div>üõí</div>
                        <h3>Seu carrinho est√° vazio</h3>
                        <p>Adicione alguns produtos</p>
                    </div>
                `;
                cartTotal.textContent = 'Total: R$ 0,00';
                checkoutBtn.style.display = 'none';
                return;
            }

            const total = carrinho.reduce((sum, item) => sum + item.preco, 0);

            cartItems.innerHTML = carrinho.map(item => `
                <div class="cart-item">
                    <div>
                        <h4>${item.nome}</h4>
                        <p>Cor: ${item.cor} | Tamanho: ${item.tamanho}</p>
                        <div style="color: var(--azul); font-weight: bold;">R$ ${item.preco.toFixed(2)}</div>
                    </div>
                    <button class="btn btn-outline" onclick="removerDoCarrinho(${item.id})">
                        üóëÔ∏è Remover
                    </button>
                </div>
            `).join('');

            cartTotal.textContent = `Total: R$ ${total.toFixed(2)}`;
            checkoutBtn.style.display = 'block';
        }

        function removerDoCarrinho(itemId) {
            const item = carrinho.find(i => i.id === itemId);
            if (item) {
                const produto = produtos.find(p => p.id === item.produtoId);
                if (produto) {
                    produto.tamanhos[item.tamanho]++;
                }
                carrinho = carrinho.filter(i => i.id !== itemId);
                salvarDados();
                atualizarCarrinho();
                carregarProdutos();
            }
        }

        function finalizarPedido() {
            if (carrinho.length === 0) return;

            const mensagem = `Ol√°! Me interessei nos seguintes produtos:\n${carrinho.map(item => 
                `- ${item.nome} | Cor: ${item.cor} | Tamanho: ${item.tamanho}`
            ).join('\n')}`;

            const url = `https://wa.me/5531999352031?text=${encodeURIComponent(mensagem)}`;
            window.open(url, '_blank');

            carrinho = [];
            salvarDados();
            atualizarCarrinho();
            showTab('catalogo');
        }

        // Admin
        function loginAdmin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            const message = document.getElementById('loginMessage');

            if (username === 'somosfavela' && password === 'desde1992') {
                adminLogado = true;
                localStorage.setItem('adminLogado', 'true');
                document.getElementById('adminPanel').style.display = 'block';
                showTab('admin-painel');
                carregarProdutosAdmin();
                message.innerHTML = '<div style="color: green;">‚úÖ Login realizado!</div>';
            } else {
                message.innerHTML = '<div style="color: red;">‚ùå Credenciais inv√°lidas!</div>';
            }
        }

        function logoutAdmin() {
            adminLogado = false;
            localStorage.removeItem('adminLogado');
            document.getElementById('adminPanel').style.display = 'none';
            showTab('catalogo');
        }

        function carregarProdutosAdmin() {
            const grid = document.getElementById('adminProductsGrid');
            
            grid.innerHTML = produtos.map(produto => {
                const estoque = Object.entries(produto.tamanhos).map(([t, q]) => 
                    `<span style="display: inline-block; background: ${q > 0 ? '#e8f5e8' : '#ffeaea'}; padding: 2px 6px; margin: 2px; border-radius: 3px; font-size: 12px;">${t}: ${q}</span>`
                ).join('');

                return `
                    <div class="admin-product-card">
                        <div class="product-status ${produto.ativo ? 'status-ativo' : 'status-inativo'}">
                            ${produto.ativo ? 'Ativo' : 'Inativo'}
                        </div>
                        <h3>${produto.nome}</h3>
                        <div style="color: var(--cinza-escuro); margin: 5px 0;">${produto.categoria}</div>
                        <div style="color: var(--azul); font-weight: bold; margin: 5px 0;">R$ ${produto.preco.toFixed(2)}</div>
                        <div style="margin: 10px 0;">
                            <strong>Estoque:</strong><br>${estoque}
                        </div>
                        <div style="display: flex; gap: 5px; margin-top: 10px;">
                            <button class="btn" style="font-size: 12px; padding: 5px 10px;" onclick="editarProduto(${produto.id})">
                                ‚úèÔ∏è Editar
                            </button>
                            <button class="btn ${produto.ativo ? 'btn-outline' : ''}" style="font-size: 12px; padding: 5px 10px;" onclick="toggleProduto(${produto.id})">
                                ${produto.ativo ? 'üö´ Desativar' : '‚úÖ Ativar'}
                            </button>
                            <button class="btn btn-outline" style="font-size: 12px; padding: 5px 10px; color: var(--vermelho); border-color: var(--vermelho);" onclick="excluirProduto(${produto.id})">
                                üóëÔ∏è Excluir
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function abrirModalProduto() {
            produtoEditando = null;
            document.getElementById('modalTitle').textContent = 'Novo Produto';
            document.getElementById('productForm').reset();
            document.getElementById('productModal').style.display = 'flex';
        }

        function fecharModalProduto() {
            document.getElementById('productModal').style.display = 'none';
        }

        function editarProduto(produtoId) {
            const produto = produtos.find(p => p.id === produtoId);
            if (!produto) return;

            produtoEditando = produtoId;
            document.getElementById('modalTitle').textContent = 'Editar Produto';

            document.getElementById('productName').value = produto.nome;
            document.getElementById('productCategory').value = produto.categoria;
            document.getElementById('productPrice').value = produto.preco;
            document.getElementById('productColor').value = produto.cor;
            document.getElementById('productDescription').value = produto.descricao;
            document.getElementById('productImage').value = produto.imagem;

            const tamanhosStr = Object.entries(produto.tamanhos).map(([t, q]) => `${t}:${q}`).join(', ');
            document.getElementById('productSizes').value = tamanhosStr;

            document.getElementById('productModal').style.display = 'flex';
        }

        function salvarProduto() {
            const nome = document.getElementById('productName').value;
            const categoria = document.getElementById('productCategory').value;
            const preco = parseFloat(document.getElementById('productPrice').value);
            const cor = document.getElementById('productColor').value;
            const descricao = document.getElementById('productDescription').value;
            const imagem = document.getElementById('productImage').value;

            // Processar tamanhos
            const tamanhos = {};
            document.getElementById('productSizes').value.split(',').forEach(item => {
                const [tamanho, quantidade] = item.split(':').map(s => s.trim());
                if (tamanho && quantidade) {
                    tamanhos[tamanho] = parseInt(quantidade);
                }
            });

            if (produtoEditando) {
                // Editar
                const index = produtos.findIndex(p => p.id === produtoEditando);
                if (index !== -1) {
                    produtos[index] = { ...produtos[index], nome, categoria, preco, cor, descricao, imagem, tamanhos };
                }
            } else {
                // Novo
                const novoId = produtos.length > 0 ? Math.max(...produtos.map(p => p.id)) + 1 : 1;
                produtos.push({
                    id: novoId,
                    nome,
                    categoria,
                    preco,
                    cor,
                    tamanhos,
                    descricao,
                    imagem,
                    ativo: true
                });
            }

            salvarDados();
            carregarProdutosAdmin();
            carregarProdutos();
            fecharModalProduto();

            alert('‚úÖ Produto salvo!');
        }

        function toggleProduto(produtoId) {
            const produto = produtos.find(p => p.id === produtoId);
            if (produto) {
                produto.ativo = !produto.ativo;
                salvarDados();
                carregarProdutosAdmin();
                carregarProdutos();
            }
        }

        function excluirProduto(produtoId) {
            if (confirm('Tem certeza que deseja excluir este produto?')) {
                produtos = produtos.filter(p => p.id !== produtoId);
                salvarDados();
                carregarProdutosAdmin();
                carregarProdutos();
            }
        }

        // Utilit√°rios
        function salvarDados() {
            localStorage.setItem('lojaProdutos', JSON.stringify(produtos));
            localStorage.setItem('lojaCarrinho', JSON.stringify(carrinho));
        }

        // Fechar modais
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>